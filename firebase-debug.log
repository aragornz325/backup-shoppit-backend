[debug] [2022-06-21T12:29:26.194Z] ----------------------------------------------------------------------
[debug] [2022-06-21T12:29:26.196Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\rodri\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2022-06-21T12:29:26.197Z] CLI Version:   10.9.2
[debug] [2022-06-21T12:29:26.197Z] Platform:      win32
[debug] [2022-06-21T12:29:26.197Z] Node Version:  v16.15.0
[debug] [2022-06-21T12:29:26.197Z] Time:          Tue Jun 21 2022 09:29:26 GMT-0300 (hora estándar de Argentina)
[debug] [2022-06-21T12:29:26.198Z] ----------------------------------------------------------------------
[debug] 
[debug] [2022-06-21T12:29:26.252Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2022-06-21T12:29:26.253Z] > authorizing via signed-in user (rodrigo.m.quintero@gmail.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[warn] !  emulators: It seems that you are running multiple instances of the emulator suite for project shoppit-app-stg. This may result in unexpected behavior. 
[debug] [2022-06-21T12:29:26.292Z] [hub] writing locator at C:\Users\rodri\AppData\Local\Temp\hub-shoppit-app-stg.json
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub, storage\u001b[22m"}}
[info] +  functions: Using node@16 from host. {"metadata":{"emulator":{"name":"functions"},"message":"Using node@16 from host."}}
[debug] [2022-06-21T12:29:26.344Z] defaultcredentials: writing to file C:\Users\rodri\AppData\Roaming\firebase\rodrigo_m.quintero_gmail.com_application_default_credentials.json
[debug] [2022-06-21T12:29:26.345Z] Setting GAC to C:\Users\rodri\AppData\Roaming\firebase\rodrigo_m.quintero_gmail.com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\rodri\\AppData\\Roaming\\firebase\\rodrigo_m.quintero_gmail.com_application_default_credentials.json"}}
[debug] [2022-06-21T12:29:26.347Z] > refreshing access token with scopes: []
[debug] [2022-06-21T12:29:26.347Z] >>> HTTP REQUEST POST https://www.googleapis.com/oauth2/v3/token  
 <request body omitted>
[debug] [2022-06-21T12:29:26.510Z] <<< HTTP RESPONSE 200 {"expires":"Mon, 01 Jan 1990 00:00:00 GMT","date":"Tue, 21 Jun 2022 12:29:25 GMT","pragma":"no-cache","cache-control":"no-cache, no-store, max-age=0, must-revalidate","content-type":"application/json; charset=utf-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","server":"scaffolding on HTTPServer2","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2022-06-21T12:29:26.519Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/shoppit-app-stg/adminSdkConfig [none]
[debug] [2022-06-21T12:29:26.963Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/shoppit-app-stg/adminSdkConfig 200
[debug] [2022-06-21T12:29:26.963Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/shoppit-app-stg/adminSdkConfig {"projectId":"shoppit-app-stg","databaseURL":"https://shoppit-app-stg-default-rtdb.firebaseio.com","storageBucket":"shoppit-app-stg.appspot.com","locationId":"southamerica-east1"}
[warn] !  ui: Emulator UI unable to start on port 4000, starting on 4004 instead. {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI unable to start on port 4000, starting on 4004 instead."}}
[debug] [2022-06-21T12:29:26.999Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2022-06-21T12:29:26.999Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2022-06-21T12:29:26.999Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\rodri\\.cache\\firebase\\emulators\\ui-v1.7.0\\server.bundle.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\rodri\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.7.0\\\\server.bundle.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2022-06-21T12:29:27.102Z] Web / API server started at localhost:4004
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at localhost:4004\n"}}
[info] i  functions: Watching "C:\ittechgroup\backend\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\ittechgroup\\backend\\functions\" for Cloud Functions..."}}
[debug] [2022-06-21T12:29:27.282Z] Validating nodejs source
[debug] [2022-06-21T12:29:30.210Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:29:30.211Z] Building nodejs source
[debug] [2022-06-21T12:29:30.211Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:29:30.212Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:29:30.388Z] Serving at port 9005

[debug] [2022-06-21T12:29:31.094Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:29:31.100Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:29:31.111Z] addAuthTrigger {"eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/shoppit-app-stg"}}
[info] +  functions[us-central1-setCustomerClaim]: auth function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mauth\u001b[22m function initialized."}}
[info] +  functions[us-central1-api]: http function initialized (http://localhost:5001/shoppit-app-stg/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5001/shoppit-app-stg/us-central1/api)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://localhost:4004                │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ localhost:5001 │ http://localhost:4004/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at localhost:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2022-06-21T12:29:35.513Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:29:35.513Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:29:35.513Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:29:35.522Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:29:35.522Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:29:35.522Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:29:35.522Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\30872 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\30872"}}
[debug] [2022-06-21T12:29:35.523Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: BUSY"}}
[debug] [2022-06-21T12:29:36.772Z] [runtime-status] [30872] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:29:36.772Z] [runtime-status] [30872] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:29:36.775Z] [runtime-status] [30872] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.776Z] [runtime-status] [30872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.777Z] [runtime-status] [30872] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:29:36.777Z] [runtime-status] [30872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.818Z] [runtime-status] [30872] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:29:36.818Z] [runtime-status] [30872] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:29:36.819Z] [runtime-status] [30872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.820Z] [runtime-status] [30872] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.821Z] [runtime-status] [30872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:29:36.821Z] [runtime-status] [30872] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[warn] !  functions: The Firebase Authentication emulator is not running, so calls to Firebase Authentication will affect production. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Firebase Authentication emulator is not running, so calls to Firebase Authentication will affect production."}}
[debug] [2022-06-21T12:29:37.587Z] [runtime-status] [30872] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:29:37.588Z] [runtime-status] [30872] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Running api in signature http"}}
[debug] [2022-06-21T12:29:37.590Z] [runtime-status] [30872] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\30872 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\30872"}}
[debug] [2022-06-21T12:29:37.593Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:29:37.594Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:29:37.599Z] [runtime-status] [30872] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:29:37.604Z] [runtime-status] [30872] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [30872] Ephemeral server survived."}}
[info] >  {"severity":"INFO","message":"tienes 1 usuarios"} {"user":{"severity":"INFO","message":"tienes 1 usuarios"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"tienes 1 usuarios\"}"}}
[info] >  {"severity":"INFO","message":"tienes 2 usuarios"} {"user":{"severity":"INFO","message":"tienes 2 usuarios"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"tienes 2 usuarios\"}"}}
[info] >  GET /users/masiveclaims 409 745.840 ms - 241 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 745.840 ms - 241\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 745.840 ms - 241\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:29:38.356Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: IDLE"}}
[debug] [2022-06-21T12:29:38.357Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T12:31:18.125Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:31:19.130Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T12:31:19.130Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: FINISHING"}}
[debug] [2022-06-21T12:31:19.131Z] Validating nodejs source
[debug] [2022-06-21T12:31:22.384Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:31:22.384Z] Building nodejs source
[debug] [2022-06-21T12:31:22.385Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:31:22.385Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:31:22.391Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: exited"}}
[debug] [2022-06-21T12:31:22.391Z] [worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-28f3e991-2338-4ba1-a907-9c7a9df55de4]: FINISHED"}}
[debug] [2022-06-21T12:31:22.392Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:31:22.392Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:31:22.392Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:31:22.392Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:31:22.398Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:31:22.398Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:31:22.398Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:31:22.399Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\31916 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\31916"}}
[debug] [2022-06-21T12:31:22.399Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: BUSY"}}
[debug] [2022-06-21T12:31:22.578Z] Serving at port 9005

[debug] [2022-06-21T12:31:23.383Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:31:23.389Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:31:23.677Z] [runtime-status] [31916] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:31:23.679Z] [runtime-status] [31916] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:31:23.682Z] [runtime-status] [31916] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.683Z] [runtime-status] [31916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.683Z] [runtime-status] [31916] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:31:23.684Z] [runtime-status] [31916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.728Z] [runtime-status] [31916] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:31:23.728Z] [runtime-status] [31916] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:31:23.729Z] [runtime-status] [31916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.730Z] [runtime-status] [31916] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.731Z] [runtime-status] [31916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:31:23.731Z] [runtime-status] [31916] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:31:24.568Z] [runtime-status] [31916] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:31:24.569Z] [runtime-status] [31916] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Running api in signature http"}}
[debug] [2022-06-21T12:31:24.571Z] [runtime-status] [31916] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\31916 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\31916"}}
[debug] [2022-06-21T12:31:24.574Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:31:24.574Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:31:24.582Z] [runtime-status] [31916] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:31:24.587Z] [runtime-status] [31916] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31916] Ephemeral server survived."}}
[info] >  {"severity":"INFO","message":"tienes 1 usuarios"} {"user":{"severity":"INFO","message":"tienes 1 usuarios"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"tienes 1 usuarios\"}"}}
[info] >  {"severity":"INFO","message":"tienes 2 usuarios"} {"user":{"severity":"INFO","message":"tienes 2 usuarios"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"tienes 2 usuarios\"}"}}
[info] >  GET /users/masiveclaims 409 722.798 ms - 31 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 722.798 ms - 31\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 722.798 ms - 31\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:31:25.312Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: IDLE"}}
[debug] [2022-06-21T12:31:25.313Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T12:32:54.640Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:32:55.654Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T12:32:55.654Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: FINISHING"}}
[debug] [2022-06-21T12:32:55.656Z] Validating nodejs source
[debug] [2022-06-21T12:32:58.533Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:32:58.534Z] Building nodejs source
[debug] [2022-06-21T12:32:58.534Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:32:58.534Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: exited"}}
[debug] [2022-06-21T12:32:58.534Z] [worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-0c84dde1-8e2f-4b61-b46a-7d8c9dff6ac8]: FINISHED"}}
[debug] [2022-06-21T12:32:58.535Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:32:58.714Z] Serving at port 9005

[debug] [2022-06-21T12:32:59.461Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:32:59.467Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:33:03.956Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:33:03.956Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:33:03.956Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:33:03.956Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:33:03.961Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:33:03.962Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:33:03.962Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:33:03.962Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\31572 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\31572"}}
[debug] [2022-06-21T12:33:03.962Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: BUSY"}}
[debug] [2022-06-21T12:33:05.146Z] [runtime-status] [31572] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:33:05.147Z] [runtime-status] [31572] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:33:05.150Z] [runtime-status] [31572] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.151Z] [runtime-status] [31572] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.151Z] [runtime-status] [31572] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:33:05.152Z] [runtime-status] [31572] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.189Z] [runtime-status] [31572] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:33:05.189Z] [runtime-status] [31572] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:33:05.190Z] [runtime-status] [31572] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.191Z] [runtime-status] [31572] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.192Z] [runtime-status] [31572] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:33:05.192Z] [runtime-status] [31572] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:33:05.995Z] [runtime-status] [31572] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:33:05.996Z] [runtime-status] [31572] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Running api in signature http"}}
[debug] [2022-06-21T12:33:06.001Z] [runtime-status] [31572] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\31572 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\31572"}}
[debug] [2022-06-21T12:33:06.005Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:33:06.006Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:33:06.013Z] [runtime-status] [31572] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:33:06.021Z] [runtime-status] [31572] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31572] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 775.317 ms - 137 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 775.317 ms - 137\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 775.317 ms - 137\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:33:06.796Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: IDLE"}}
[debug] [2022-06-21T12:33:06.796Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-06-21T12:37:07.073Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:37:08.084Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T12:37:08.084Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: FINISHING"}}
[debug] [2022-06-21T12:37:08.086Z] Validating nodejs source
[debug] [2022-06-21T12:37:11.282Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:37:11.282Z] Building nodejs source
[debug] [2022-06-21T12:37:11.282Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:37:11.282Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:37:11.288Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: exited"}}
[debug] [2022-06-21T12:37:11.288Z] [worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-e2f60d25-a3ec-49dd-919a-df4d046b8a41]: FINISHED"}}
[debug] [2022-06-21T12:37:11.446Z] Serving at port 9005

[debug] [2022-06-21T12:37:12.169Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:37:12.174Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:38:36.275Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:38:37.290Z] Validating nodejs source
[debug] [2022-06-21T12:38:40.333Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:38:40.333Z] Building nodejs source
[debug] [2022-06-21T12:38:40.333Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:38:40.334Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:38:40.334Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:38:40.334Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:38:40.334Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:38:40.340Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:38:40.340Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:38:40.340Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:38:40.340Z] [worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\22640 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\22640"}}
[debug] [2022-06-21T12:38:40.340Z] [worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: BUSY"}}
[debug] [2022-06-21T12:38:40.340Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:38:40.557Z] Serving at port 9005

[debug] [2022-06-21T12:38:41.346Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:38:41.351Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:38:41.607Z] [runtime-status] [22640] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:38:41.608Z] [runtime-status] [22640] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:38:41.611Z] [runtime-status] [22640] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.612Z] [runtime-status] [22640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.613Z] [runtime-status] [22640] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:38:41.613Z] [runtime-status] [22640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.657Z] [runtime-status] [22640] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:38:41.657Z] [runtime-status] [22640] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:38:41.658Z] [runtime-status] [22640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.659Z] [runtime-status] [22640] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.659Z] [runtime-status] [22640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:38:41.659Z] [runtime-status] [22640] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:38:42.482Z] [runtime-status] [22640] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:38:42.483Z] [runtime-status] [22640] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Running api in signature http"}}
[debug] [2022-06-21T12:38:42.486Z] [runtime-status] [22640] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\22640 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\22640"}}
[debug] [2022-06-21T12:38:42.489Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:38:42.490Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:38:42.495Z] [runtime-status] [22640] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:38:42.503Z] [runtime-status] [22640] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22640] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 820.536 ms - 103 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 820.536 ms - 103\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 820.536 ms - 103\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:38:43.334Z] [worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: IDLE"}}
[debug] [2022-06-21T12:38:43.334Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:38:43.844Z] [worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: exited"}}
[debug] [2022-06-21T12:38:43.844Z] [worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-00906177-2fe1-4764-acf6-45bea7b907aa]: FINISHED"}}
[debug] [2022-06-21T12:39:13.456Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:39:14.460Z] Validating nodejs source
[debug] [2022-06-21T12:39:17.376Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:39:17.376Z] Building nodejs source
[debug] [2022-06-21T12:39:17.376Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:39:17.377Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:39:17.377Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:39:17.377Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:39:17.377Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:39:17.384Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:39:17.384Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:39:17.384Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:39:17.384Z] [worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\35100 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\35100"}}
[debug] [2022-06-21T12:39:17.384Z] [worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: BUSY"}}
[debug] [2022-06-21T12:39:17.385Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:39:17.588Z] Serving at port 9005

[debug] [2022-06-21T12:39:18.331Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:39:18.337Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:39:18.608Z] [runtime-status] [35100] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:39:18.609Z] [runtime-status] [35100] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:39:18.612Z] [runtime-status] [35100] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.613Z] [runtime-status] [35100] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.614Z] [runtime-status] [35100] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:39:18.614Z] [runtime-status] [35100] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.655Z] [runtime-status] [35100] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:39:18.655Z] [runtime-status] [35100] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:39:18.656Z] [runtime-status] [35100] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.657Z] [runtime-status] [35100] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.658Z] [runtime-status] [35100] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:39:18.658Z] [runtime-status] [35100] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:39:19.447Z] [runtime-status] [35100] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:39:19.448Z] [runtime-status] [35100] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Running api in signature http"}}
[debug] [2022-06-21T12:39:19.451Z] [runtime-status] [35100] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\35100 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\35100"}}
[debug] [2022-06-21T12:39:19.454Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:39:19.455Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:39:19.460Z] [runtime-status] [35100] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:39:19.468Z] [runtime-status] [35100] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [35100] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 782.527 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 782.527 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 782.527 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:39:20.261Z] [worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: IDLE"}}
[debug] [2022-06-21T12:39:20.261Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:39:20.733Z] [worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: exited"}}
[debug] [2022-06-21T12:39:20.734Z] [worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d4417680-6b7b-4593-a12f-91d64999bed2]: FINISHED"}}
[debug] [2022-06-21T12:42:59.941Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:43:00.947Z] Validating nodejs source
[debug] [2022-06-21T12:43:03.914Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:43:03.915Z] Building nodejs source
[debug] [2022-06-21T12:43:03.915Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:43:03.915Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:43:04.137Z] Serving at port 9005

[debug] [2022-06-21T12:43:04.871Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:43:04.871Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:43:04.871Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:43:04.871Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:43:04.878Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:43:04.878Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:43:04.878Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:43:04.879Z] [worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\17320 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\17320"}}
[debug] [2022-06-21T12:43:04.879Z] [worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: BUSY"}}
[debug] [2022-06-21T12:43:05.014Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:43:05.020Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:43:06.145Z] [runtime-status] [17320] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:43:06.147Z] [runtime-status] [17320] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:43:06.149Z] [runtime-status] [17320] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.151Z] [runtime-status] [17320] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.151Z] [runtime-status] [17320] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:43:06.152Z] [runtime-status] [17320] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.190Z] [runtime-status] [17320] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:43:06.190Z] [runtime-status] [17320] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:43:06.191Z] [runtime-status] [17320] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.192Z] [runtime-status] [17320] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.192Z] [runtime-status] [17320] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:43:06.193Z] [runtime-status] [17320] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:43:06.937Z] [runtime-status] [17320] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:43:06.938Z] [runtime-status] [17320] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Running api in signature http"}}
[debug] [2022-06-21T12:43:06.940Z] [runtime-status] [17320] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\17320 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\17320"}}
[debug] [2022-06-21T12:43:06.943Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:43:06.944Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:43:06.950Z] [runtime-status] [17320] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:43:06.963Z] [runtime-status] [17320] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [17320] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 822.329 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 822.329 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 822.329 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:43:07.796Z] [worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: IDLE"}}
[debug] [2022-06-21T12:43:07.797Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:43:08.298Z] [worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: exited"}}
[debug] [2022-06-21T12:43:08.298Z] [worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c0166911-33dc-4342-8b5a-1ea3ef336940]: FINISHED"}}
[debug] [2022-06-21T12:44:17.811Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:44:18.814Z] Validating nodejs source
[debug] [2022-06-21T12:44:22.203Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:44:22.203Z] Building nodejs source
[debug] [2022-06-21T12:44:22.203Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:44:22.204Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:44:22.204Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:44:22.204Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:44:22.204Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:44:22.209Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:44:22.209Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:44:22.209Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:44:22.209Z] [worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\9096 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\9096"}}
[debug] [2022-06-21T12:44:22.210Z] [worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: BUSY"}}
[debug] [2022-06-21T12:44:22.210Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:44:22.407Z] Serving at port 9005

[debug] [2022-06-21T12:44:23.212Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:44:23.218Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:44:23.472Z] [runtime-status] [9096] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:44:23.474Z] [runtime-status] [9096] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:44:23.476Z] [runtime-status] [9096] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.477Z] [runtime-status] [9096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.478Z] [runtime-status] [9096] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:44:23.478Z] [runtime-status] [9096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.516Z] [runtime-status] [9096] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:44:23.516Z] [runtime-status] [9096] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:44:23.517Z] [runtime-status] [9096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.519Z] [runtime-status] [9096] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.519Z] [runtime-status] [9096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:23.519Z] [runtime-status] [9096] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:44:24.295Z] [runtime-status] [9096] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:44:24.296Z] [runtime-status] [9096] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Running api in signature http"}}
[debug] [2022-06-21T12:44:24.299Z] [runtime-status] [9096] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\9096 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\9096"}}
[debug] [2022-06-21T12:44:24.303Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:44:24.303Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:44:24.307Z] [runtime-status] [9096] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:44:24.318Z] [runtime-status] [9096] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9096] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 832.040 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 832.040 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 832.040 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:44:25.159Z] [worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: IDLE"}}
[debug] [2022-06-21T12:44:25.160Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:44:25.706Z] [worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: exited"}}
[debug] [2022-06-21T12:44:25.707Z] [worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-c6c2cf42-fbb9-4e30-aa17-33557ab75e60]: FINISHED"}}
[debug] [2022-06-21T12:44:43.367Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:44:44.383Z] Validating nodejs source
[debug] [2022-06-21T12:44:47.277Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:44:47.277Z] Building nodejs source
[debug] [2022-06-21T12:44:47.277Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:44:47.278Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:44:47.278Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:44:47.278Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:44:47.278Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:44:47.284Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:44:47.284Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:44:47.284Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:44:47.284Z] [worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\21248 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\21248"}}
[debug] [2022-06-21T12:44:47.284Z] [worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: BUSY"}}
[debug] [2022-06-21T12:44:47.285Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:44:47.467Z] Serving at port 9005

[debug] [2022-06-21T12:44:48.280Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:44:48.286Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:44:48.564Z] [runtime-status] [21248] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:44:48.565Z] [runtime-status] [21248] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:44:48.568Z] [runtime-status] [21248] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.569Z] [runtime-status] [21248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.569Z] [runtime-status] [21248] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:44:48.570Z] [runtime-status] [21248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.608Z] [runtime-status] [21248] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:44:48.608Z] [runtime-status] [21248] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:44:48.609Z] [runtime-status] [21248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.610Z] [runtime-status] [21248] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.610Z] [runtime-status] [21248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:44:48.610Z] [runtime-status] [21248] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:44:49.370Z] [runtime-status] [21248] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:44:49.371Z] [runtime-status] [21248] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Running api in signature http"}}
[debug] [2022-06-21T12:44:49.374Z] [runtime-status] [21248] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\21248 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\21248"}}
[debug] [2022-06-21T12:44:49.376Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:44:49.376Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:44:49.383Z] [runtime-status] [21248] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:44:49.394Z] [runtime-status] [21248] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [21248] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 742.781 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 742.781 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 742.781 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:44:50.147Z] [worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: IDLE"}}
[debug] [2022-06-21T12:44:50.147Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:44:50.640Z] [worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: exited"}}
[debug] [2022-06-21T12:44:50.640Z] [worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-321aa9d1-485e-4418-9e0b-f3b6fc803f01]: FINISHED"}}
[debug] [2022-06-21T12:45:05.766Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:45:06.776Z] Validating nodejs source
[debug] [2022-06-21T12:45:09.640Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:45:09.640Z] Building nodejs source
[debug] [2022-06-21T12:45:09.640Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:45:09.641Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:45:09.646Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:45:09.646Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:45:09.646Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:45:09.646Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:45:09.653Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:45:09.653Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:45:09.653Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:45:09.653Z] [worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\32944 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\32944"}}
[debug] [2022-06-21T12:45:09.653Z] [worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: BUSY"}}
[debug] [2022-06-21T12:45:09.843Z] Serving at port 9005

[debug] [2022-06-21T12:45:10.653Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:45:10.659Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:45:10.969Z] [runtime-status] [32944] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:45:10.970Z] [runtime-status] [32944] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:45:10.972Z] [runtime-status] [32944] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:10.973Z] [runtime-status] [32944] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:10.974Z] [runtime-status] [32944] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:45:10.974Z] [runtime-status] [32944] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:11.015Z] [runtime-status] [32944] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:45:11.015Z] [runtime-status] [32944] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:45:11.016Z] [runtime-status] [32944] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:11.018Z] [runtime-status] [32944] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:11.019Z] [runtime-status] [32944] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:45:11.019Z] [runtime-status] [32944] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:45:11.789Z] [runtime-status] [32944] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:45:11.789Z] [runtime-status] [32944] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Running api in signature http"}}
[debug] [2022-06-21T12:45:11.792Z] [runtime-status] [32944] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\32944 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\32944"}}
[debug] [2022-06-21T12:45:11.794Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:45:11.794Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:45:11.799Z] [runtime-status] [32944] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:45:11.807Z] [runtime-status] [32944] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32944] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 200 805.970 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 805.970 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 805.970 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:45:12.623Z] [worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: IDLE"}}
[debug] [2022-06-21T12:45:12.623Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44 {"user":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44\r"}}
[info] >          var _this = _super.call(this, errorInfo.message) || this; {"user":"        var _this = _super.call(this, errorInfo.message) || this;\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         var _this = _super.call(this, errorInfo.message) || this;\r"}}
[info] >                             ^ {"user":"                           ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                            ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  FirebaseAuthError: There is no user record corresponding to the provided identifier. {"user":"FirebaseAuthError: There is no user record corresponding to the provided identifier.\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m FirebaseAuthError: There is no user record corresponding to the provided identifier.\r"}}
[info] >      at FirebaseAuthError.FirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:44:28) {"user":"    at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.FirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:44:28)\r"}}
[info] >      at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:90:28) {"user":"    at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseAuthError.PrefixedFirebaseError [as constructor] (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:90:28)\r"}}
[info] >      at new FirebaseAuthError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:149:16) {"user":"    at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new FirebaseAuthError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:149:16)\r"}}
[info] >      at Function.FirebaseAuthError.fromServerError (C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\utils\error.js:188:16) {"user":"    at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.FirebaseAuthError.fromServerError (C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\utils\\error.js:188:16)\r"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\firebase-admin\lib\auth\auth-api-request.js:1665:49 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1665:49\r"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r"}}
[info] >    errorInfo: { {"user":"  errorInfo: {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {\r"}}
[info] >      code: 'auth/user-not-found', {"user":"    code: 'auth/user-not-found',\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/user-not-found',\r"}}
[info] >      message: 'There is no user record corresponding to the provided identifier.' {"user":"    message: 'There is no user record corresponding to the provided identifier.'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'There is no user record corresponding to the provided identifier.'\r"}}
[info] >    }, {"user":"  },\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },\r"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[debug] [2022-06-21T12:45:13.104Z] [worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: exited"}}
[debug] [2022-06-21T12:45:13.105Z] [worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-d7a7fb03-ec4a-49c9-8104-8e91fa54800e]: FINISHED"}}
[debug] [2022-06-21T12:47:07.190Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:47:08.199Z] Validating nodejs source
[debug] [2022-06-21T12:47:11.122Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:47:11.122Z] Building nodejs source
[debug] [2022-06-21T12:47:11.122Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:47:11.123Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:47:11.292Z] Serving at port 9005

[debug] [2022-06-21T12:47:12.022Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:47:12.028Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:47:16.204Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:47:16.205Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:47:16.205Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:47:16.205Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:47:16.210Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:47:16.210Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:47:16.210Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:47:16.211Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\19012 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\19012"}}
[debug] [2022-06-21T12:47:16.211Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: BUSY"}}
[debug] [2022-06-21T12:47:17.380Z] [runtime-status] [19012] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:47:17.381Z] [runtime-status] [19012] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:47:17.384Z] [runtime-status] [19012] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.385Z] [runtime-status] [19012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.386Z] [runtime-status] [19012] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:47:17.386Z] [runtime-status] [19012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.427Z] [runtime-status] [19012] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:47:17.427Z] [runtime-status] [19012] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:47:17.428Z] [runtime-status] [19012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.429Z] [runtime-status] [19012] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.430Z] [runtime-status] [19012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:47:17.430Z] [runtime-status] [19012] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:47:18.217Z] [runtime-status] [19012] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:47:18.218Z] [runtime-status] [19012] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Running api in signature http"}}
[debug] [2022-06-21T12:47:18.221Z] [runtime-status] [19012] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\19012 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\19012"}}
[debug] [2022-06-21T12:47:18.225Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:47:18.226Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:47:18.230Z] [runtime-status] [19012] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:47:18.237Z] [runtime-status] [19012] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [19012] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 1155.668 ms - 1051 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1155.668 ms - 1051\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1155.668 ms - 1051\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:47:19.390Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: IDLE"}}
[debug] [2022-06-21T12:47:19.391Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-06-21T12:47:57.680Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T12:47:58.693Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T12:47:58.697Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: FINISHING"}}
[debug] [2022-06-21T12:47:58.698Z] Validating nodejs source
[debug] [2022-06-21T12:48:01.563Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T12:48:01.564Z] Building nodejs source
[debug] [2022-06-21T12:48:01.564Z] Analyzing nodejs backend spec
[debug] [2022-06-21T12:48:01.564Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: exited"}}
[debug] [2022-06-21T12:48:01.564Z] [worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-804a39f2-9fa3-4116-be10-a305c6e86717]: FINISHED"}}
[debug] [2022-06-21T12:48:01.565Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T12:48:01.565Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T12:48:01.565Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T12:48:01.565Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T12:48:01.571Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T12:48:01.571Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T12:48:01.572Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T12:48:01.572Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\23180 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\23180"}}
[debug] [2022-06-21T12:48:01.572Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: BUSY"}}
[debug] [2022-06-21T12:48:01.572Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T12:48:01.772Z] Serving at port 9005

[debug] [2022-06-21T12:48:02.560Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T12:48:02.566Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T12:48:02.888Z] [runtime-status] [23180] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T12:48:02.889Z] [runtime-status] [23180] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Disabled runtime features: undefined"}}
[debug] [2022-06-21T12:48:02.891Z] [runtime-status] [23180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.893Z] [runtime-status] [23180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.893Z] [runtime-status] [23180] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T12:48:02.894Z] [runtime-status] [23180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.933Z] [runtime-status] [23180] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T12:48:02.933Z] [runtime-status] [23180] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:48:02.934Z] [runtime-status] [23180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.935Z] [runtime-status] [23180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.936Z] [runtime-status] [23180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T12:48:02.936Z] [runtime-status] [23180] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T12:48:03.733Z] [runtime-status] [23180] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T12:48:03.734Z] [runtime-status] [23180] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Running api in signature http"}}
[debug] [2022-06-21T12:48:03.737Z] [runtime-status] [23180] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\23180 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\23180"}}
[debug] [2022-06-21T12:48:03.739Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T12:48:03.740Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T12:48:03.746Z] [runtime-status] [23180] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Ephemeral server handling GET request"}}
[debug] [2022-06-21T12:48:03.756Z] [runtime-status] [23180] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [23180] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 1234.360 ms - 127 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1234.360 ms - 127\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1234.360 ms - 127\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T12:48:04.991Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: IDLE"}}
[debug] [2022-06-21T12:48:04.991Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T13:42:33.539Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:42:34.547Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:42:34.548Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: FINISHING"}}
[debug] [2022-06-21T13:42:34.550Z] Validating nodejs source
[debug] [2022-06-21T13:42:36.974Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:42:36.974Z] Building nodejs source
[debug] [2022-06-21T13:42:36.975Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:42:36.975Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: exited"}}
[debug] [2022-06-21T13:42:36.975Z] [worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-021a6493-ca13-45fe-aadf-2b947da83ecd]: FINISHED"}}
[debug] [2022-06-21T13:42:36.976Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:42:37.146Z] Serving at port 9005

[debug] [2022-06-21T13:42:37.901Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:42:37.908Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:42:41.757Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:42:41.758Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:42:41.758Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:42:41.758Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:42:41.766Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:42:41.766Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:42:41.766Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:42:41.766Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\11988 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\11988"}}
[debug] [2022-06-21T13:42:41.766Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: BUSY"}}
[debug] [2022-06-21T13:42:42.979Z] [runtime-status] [11988] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:42:42.980Z] [runtime-status] [11988] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:42:42.982Z] [runtime-status] [11988] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:42.983Z] [runtime-status] [11988] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:42.984Z] [runtime-status] [11988] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:42:42.984Z] [runtime-status] [11988] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:43.022Z] [runtime-status] [11988] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:42:43.022Z] [runtime-status] [11988] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:42:43.023Z] [runtime-status] [11988] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:43.025Z] [runtime-status] [11988] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:43.025Z] [runtime-status] [11988] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:42:43.026Z] [runtime-status] [11988] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:42:43.836Z] [runtime-status] [11988] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:42:43.837Z] [runtime-status] [11988] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Running api in signature http"}}
[debug] [2022-06-21T13:42:43.840Z] [runtime-status] [11988] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\11988 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\11988"}}
[debug] [2022-06-21T13:42:43.844Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:42:43.844Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:42:43.850Z] [runtime-status] [11988] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:42:43.858Z] [runtime-status] [11988] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11988] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 1397.135 ms - 1051 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1397.135 ms - 1051\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1397.135 ms - 1051\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T13:42:45.252Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: IDLE"}}
[debug] [2022-06-21T13:42:45.252Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-06-21T13:42:58.653Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:42:59.659Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:42:59.660Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: FINISHING"}}
[debug] [2022-06-21T13:42:59.664Z] Validating nodejs source
[debug] [2022-06-21T13:43:02.158Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:43:02.158Z] Building nodejs source
[debug] [2022-06-21T13:43:02.158Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:43:02.159Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:43:02.165Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: exited"}}
[debug] [2022-06-21T13:43:02.165Z] [worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-78583ee7-78a9-4e45-9f0a-d0e28abe303e]: FINISHED"}}
[debug] [2022-06-21T13:43:02.166Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:43:02.166Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:43:02.166Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:43:02.166Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:43:02.172Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:43:02.172Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:43:02.172Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:43:02.172Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\7156 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\7156"}}
[debug] [2022-06-21T13:43:02.172Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: BUSY"}}
[debug] [2022-06-21T13:43:02.380Z] Serving at port 9005

[debug] [2022-06-21T13:43:03.240Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:43:03.248Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:43:03.503Z] [runtime-status] [7156] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:43:03.505Z] [runtime-status] [7156] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:43:03.507Z] [runtime-status] [7156] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.508Z] [runtime-status] [7156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.509Z] [runtime-status] [7156] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:43:03.509Z] [runtime-status] [7156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.552Z] [runtime-status] [7156] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:43:03.552Z] [runtime-status] [7156] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:43:03.553Z] [runtime-status] [7156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.555Z] [runtime-status] [7156] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.557Z] [runtime-status] [7156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:43:03.557Z] [runtime-status] [7156] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:43:04.360Z] [runtime-status] [7156] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:43:04.361Z] [runtime-status] [7156] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Running api in signature http"}}
[debug] [2022-06-21T13:43:04.365Z] [runtime-status] [7156] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\7156 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\7156"}}
[debug] [2022-06-21T13:43:04.368Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:43:04.369Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:43:04.374Z] [runtime-status] [7156] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:43:04.382Z] [runtime-status] [7156] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [7156] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 1244.467 ms - 1051 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1244.467 ms - 1051\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 1244.467 ms - 1051\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T13:43:05.624Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: IDLE"}}
[debug] [2022-06-21T13:43:05.624Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-06-21T13:44:58.368Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:44:59.383Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:44:59.383Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: FINISHING"}}
[debug] [2022-06-21T13:44:59.384Z] Validating nodejs source
[debug] [2022-06-21T13:45:01.800Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:45:01.801Z] Building nodejs source
[debug] [2022-06-21T13:45:01.801Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:45:01.801Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:45:01.807Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: exited"}}
[debug] [2022-06-21T13:45:01.807Z] [worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a056bca9-2f2d-41cc-84ee-150bd8e30d60]: FINISHED"}}
[debug] [2022-06-21T13:45:02.011Z] Serving at port 9005

[debug] [2022-06-21T13:45:02.889Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:45:02.892Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:45:14.342Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:45:15.351Z] Validating nodejs source
[debug] [2022-06-21T13:45:17.753Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:45:17.753Z] Building nodejs source
[debug] [2022-06-21T13:45:17.754Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:45:17.754Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:45:17.754Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:45:17.754Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:45:17.754Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:45:17.761Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:45:17.761Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:45:17.761Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:45:17.761Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\22208 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\22208"}}
[debug] [2022-06-21T13:45:17.761Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: BUSY"}}
[debug] [2022-06-21T13:45:17.762Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:45:17.954Z] Serving at port 9005

[debug] [2022-06-21T13:45:18.764Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:45:18.770Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:45:19.050Z] [runtime-status] [22208] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:45:19.051Z] [runtime-status] [22208] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:45:19.053Z] [runtime-status] [22208] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.055Z] [runtime-status] [22208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.055Z] [runtime-status] [22208] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:45:19.056Z] [runtime-status] [22208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.095Z] [runtime-status] [22208] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:45:19.095Z] [runtime-status] [22208] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:45:19.096Z] [runtime-status] [22208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.098Z] [runtime-status] [22208] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.098Z] [runtime-status] [22208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:45:19.098Z] [runtime-status] [22208] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:45:19.910Z] [runtime-status] [22208] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:45:19.912Z] [runtime-status] [22208] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Running api in signature http"}}
[debug] [2022-06-21T13:45:19.914Z] [runtime-status] [22208] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\22208 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\22208"}}
[debug] [2022-06-21T13:45:19.917Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:45:19.918Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:45:19.922Z] [runtime-status] [22208] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:45:19.930Z] [runtime-status] [22208] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [22208] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 2382.624 ms - 112 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 2382.624 ms - 112\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 2382.624 ms - 112\u001b[0m"}}
[info] i  functions: Finished "api" in ~2s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~2s"}}
[debug] [2022-06-21T13:45:22.311Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: IDLE"}}
[debug] [2022-06-21T13:45:22.311Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T13:46:41.822Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:46:42.835Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:46:42.836Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: FINISHING"}}
[debug] [2022-06-21T13:46:42.837Z] Validating nodejs source
[debug] [2022-06-21T13:46:45.286Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:46:45.286Z] Building nodejs source
[debug] [2022-06-21T13:46:45.286Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:46:45.286Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: exited"}}
[debug] [2022-06-21T13:46:45.286Z] [worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-a76a776c-8bff-4e0d-8cf0-eebd88238345]: FINISHED"}}
[debug] [2022-06-21T13:46:45.287Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:46:45.477Z] Serving at port 9005

[debug] [2022-06-21T13:46:46.243Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:46:46.249Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:46:47.011Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:46:47.012Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:46:47.012Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:46:47.012Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:46:47.017Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:46:47.017Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:46:47.019Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:46:47.019Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\10592 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\10592"}}
[debug] [2022-06-21T13:46:47.019Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: BUSY"}}
[debug] [2022-06-21T13:46:48.267Z] [runtime-status] [10592] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:46:48.268Z] [runtime-status] [10592] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:46:48.271Z] [runtime-status] [10592] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.272Z] [runtime-status] [10592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.272Z] [runtime-status] [10592] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:46:48.273Z] [runtime-status] [10592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.310Z] [runtime-status] [10592] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:46:48.311Z] [runtime-status] [10592] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:46:48.312Z] [runtime-status] [10592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.313Z] [runtime-status] [10592] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.314Z] [runtime-status] [10592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:46:48.314Z] [runtime-status] [10592] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:46:49.027Z] [runtime-status] [10592] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:46:49.028Z] [runtime-status] [10592] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Running api in signature http"}}
[debug] [2022-06-21T13:46:49.030Z] [runtime-status] [10592] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\10592 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\10592"}}
[debug] [2022-06-21T13:46:49.032Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:46:49.033Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:46:49.038Z] [runtime-status] [10592] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:46:49.046Z] [runtime-status] [10592] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [10592] Ephemeral server survived."}}
[info] >  GET /users/masiveclaims 409 962.638 ms - 125 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 962.638 ms - 125\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 962.638 ms - 125\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T13:46:50.012Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: IDLE"}}
[debug] [2022-06-21T13:46:50.012Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T13:47:14.507Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:47:15.522Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:47:15.522Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: FINISHING"}}
[debug] [2022-06-21T13:47:15.524Z] Validating nodejs source
[debug] [2022-06-21T13:47:18.031Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:47:18.031Z] Building nodejs source
[debug] [2022-06-21T13:47:18.031Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:47:18.031Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: exited"}}
[debug] [2022-06-21T13:47:18.032Z] [worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-90d55eed-e7ec-4fa6-8af1-778ef3261031]: FINISHED"}}
[debug] [2022-06-21T13:47:18.032Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:47:18.037Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:47:18.037Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:47:18.037Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:47:18.038Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:47:18.043Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:47:18.043Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:47:18.043Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:47:18.043Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\11984 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\11984"}}
[debug] [2022-06-21T13:47:18.043Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: BUSY"}}
[debug] [2022-06-21T13:47:18.233Z] Serving at port 9005

[debug] [2022-06-21T13:47:18.983Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:47:18.989Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:47:19.293Z] [runtime-status] [11984] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:47:19.294Z] [runtime-status] [11984] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:47:19.297Z] [runtime-status] [11984] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.299Z] [runtime-status] [11984] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.299Z] [runtime-status] [11984] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:47:19.300Z] [runtime-status] [11984] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.339Z] [runtime-status] [11984] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:47:19.339Z] [runtime-status] [11984] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:47:19.340Z] [runtime-status] [11984] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.341Z] [runtime-status] [11984] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.342Z] [runtime-status] [11984] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:19.342Z] [runtime-status] [11984] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:47:20.144Z] [runtime-status] [11984] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:47:20.145Z] [runtime-status] [11984] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Running api in signature http"}}
[debug] [2022-06-21T13:47:20.148Z] [runtime-status] [11984] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\11984 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\11984"}}
[debug] [2022-06-21T13:47:20.151Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:47:20.152Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:47:20.156Z] [runtime-status] [11984] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:47:20.166Z] [runtime-status] [11984] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11984] Ephemeral server survived."}}
[info] >  {"severity":"INFO","message":"[\n  { id: { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' } },\n  { id: { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' } }\n]"} {"user":{"severity":"INFO","message":"[\n  { id: { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' } },\n  { id: { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' } }\n]"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"[\\n  { id: { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' } },\\n  { id: { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' } }\\n]\"}"}}
[info] >  GET /users/masiveclaims 409 979.506 ms - 125 {"user":"\u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 979.506 ms - 125\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[33m409\u001b[0m 979.506 ms - 125\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T13:47:21.143Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: IDLE"}}
[debug] [2022-06-21T13:47:21.143Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[info] >  Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client {"user":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client"}}
[info] >      at new NodeError (node:internal/errors:372:5) {"user":"    at new NodeError (node:internal/errors:372:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:372:5)"}}
[info] >      at ServerResponse.setHeader (node:_http_outgoing:576:11) {"user":"    at ServerResponse.setHeader (node:_http_outgoing:576:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.setHeader (node:_http_outgoing:576:11)"}}
[info] >      at ServerResponse.header (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:794:10) {"user":"    at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.header (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:794:10)"}}
[info] >      at ServerResponse.send (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:174:12) {"user":"    at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.send (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:174:12)"}}
[info] >      at ServerResponse.json (C:\ittechgroup\backend\functions\node_modules\express\lib\response.js:278:15) {"user":"    at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at ServerResponse.json (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\response.js:278:15)"}}
[info] >      at errorHandler (C:\ittechgroup\backend\functions\src\middlewares\error.handler.js:17:21) {"user":"    at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at errorHandler (C:\\ittechgroup\\backend\\functions\\src\\middlewares\\error.handler.js:17:21)"}}
[info] >      at Layer.handle_error (C:\ittechgroup\backend\functions\node_modules\express\lib\router\layer.js:71:5) {"user":"    at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle_error (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\layer.js:71:5)"}}
[info] >      at trim_prefix (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:326:13) {"user":"    at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at trim_prefix (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:326:13)"}}
[info] >      at C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:286:9 {"user":"    at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:286:9"}}
[info] >      at Function.process_params (C:\ittechgroup\backend\functions\node_modules\express\lib\router\index.js:346:12) {"user":"    at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (C:\\ittechgroup\\backend\\functions\\node_modules\\express\\lib\\router\\index.js:346:12)"}}
[debug] [2022-06-21T13:47:38.003Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:47:39.008Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:47:39.009Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: FINISHING"}}
[debug] [2022-06-21T13:47:39.010Z] Validating nodejs source
[debug] [2022-06-21T13:47:41.473Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:47:41.474Z] Building nodejs source
[debug] [2022-06-21T13:47:41.474Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:47:41.474Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: exited"}}
[debug] [2022-06-21T13:47:41.474Z] [worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-f1d7f83e-ac28-4433-a7ae-7a352e7c3726]: FINISHED"}}
[debug] [2022-06-21T13:47:41.475Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-06-21T13:47:41.475Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-06-21T13:47:41.475Z] Accepted request GET /shoppit-app-stg/us-central1/api/users/masiveclaims --> us-central1-api
[debug] [2022-06-21T13:47:41.475Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env, .env.dev. 
[debug] [2022-06-21T13:47:41.481Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2022-06-21T13:47:41.481Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2022-06-21T13:47:41.481Z] [worker-pool] submitWork(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-api)"}}
[debug] [2022-06-21T13:47:41.481Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: Assigning socketPath: \\?\pipe\C:\ittechgroup\backend\functions\29500 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: Assigning socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\29500"}}
[debug] [2022-06-21T13:47:41.481Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: BUSY"}}
[debug] [2022-06-21T13:47:41.481Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:47:41.665Z] Serving at port 9005

[debug] [2022-06-21T13:47:42.474Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:47:42.482Z] shutdown requested via /__/quitquitquit

[debug] [2022-06-21T13:47:42.755Z] [runtime-status] [29500] Functions runtime initialized. {"cwd":"C:\\ittechgroup\\backend\\functions","node_version":"16.15.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Functions runtime initialized. {\"cwd\":\"C:\\\\ittechgroup\\\\backend\\\\functions\",\"node_version\":\"16.15.0\"}"}}
[debug] [2022-06-21T13:47:42.756Z] [runtime-status] [29500] Disabled runtime features: undefined {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Disabled runtime features: undefined"}}
[debug] [2022-06-21T13:47:42.759Z] [runtime-status] [29500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.761Z] [runtime-status] [29500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.761Z] [runtime-status] [29500] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-06-21T13:47:42.762Z] [runtime-status] [29500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.799Z] [runtime-status] [29500] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-06-21T13:47:42.799Z] [runtime-status] [29500] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:47:42.800Z] [runtime-status] [29500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.801Z] [runtime-status] [29500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.802Z] [runtime-status] [29500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.21.2","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.21.2\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-06-21T13:47:42.802Z] [runtime-status] [29500] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\ittechgroup\\backend\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\ittechgroup\\\\backend\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-06-21T13:47:43.579Z] [runtime-status] [29500] Beginning invocation function api! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Beginning invocation function api!"}}
[info] i  functions: Beginning execution of "api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"api\""}}
[debug] [2022-06-21T13:47:43.580Z] [runtime-status] [29500] Running api in signature http {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Running api in signature http"}}
[debug] [2022-06-21T13:47:43.583Z] [runtime-status] [29500] Attempting to listen to socketPath: \\?\pipe\C:\ittechgroup\backend\functions\29500 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Attempting to listen to socketPath: \\\\?\\pipe\\C:\\ittechgroup\\backend\\functions\\29500"}}
[debug] [2022-06-21T13:47:43.586Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2022-06-21T13:47:43.586Z] [functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/shoppit-app-stg/us-central1/api/users/masiveclaims, mapping to path=/users/masiveclaims"}}
[debug] [2022-06-21T13:47:43.592Z] [runtime-status] [29500] Ephemeral server handling GET request {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Ephemeral server handling GET request"}}
[debug] [2022-06-21T13:47:43.601Z] [runtime-status] [29500] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29500] Ephemeral server survived."}}
[info] >  {"severity":"INFO","message":"[\n  { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' },\n  { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' }\n]"} {"user":{"severity":"INFO","message":"[\n  { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' },\n  { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' }\n]"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"[\\n  { id: 'jshFLvSHzcZMJgPbdRr5r7OTud23' },\\n  { id: 'ubid2EO7rhhik9LKTv2B6NPROLx1' }\\n]\"}"}}
[info] >  GET /users/masiveclaims 200 1789.132 ms - 41 {"user":"\u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 1789.132 ms - 41\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /users/masiveclaims \u001b[32m200\u001b[0m 1789.132 ms - 41\u001b[0m"}}
[info] i  functions: Finished "api" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"api\" in ~1s"}}
[debug] [2022-06-21T13:47:45.387Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: IDLE"}}
[debug] [2022-06-21T13:47:45.387Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-06-21T13:59:19.516Z] File C:\ittechgroup\backend\functions\src\utils\masiveCostumerClaim.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\ittechgroup\\backend\\functions\\src\\utils\\masiveCostumerClaim.js changed, reloading triggers"}}
[debug] [2022-06-21T13:59:20.521Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2022-06-21T13:59:20.521Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: FINISHING"}}
[debug] [2022-06-21T13:59:20.522Z] Validating nodejs source
[debug] [2022-06-21T13:59:22.920Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "@hapi/boom": "^10.0.0",
    "axios": "^0.27.2",
    "body-parser": "^1.20.0",
    "concurrently": "^7.1.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0",
    "express": "^4.18.1",
    "express-joi-validation": "^5.0.1",
    "firebase": "^9.8.1",
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.21.2",
    "helmet": "^5.1.0",
    "joi": "^17.6.0",
    "jsonwebtoken": "^8.5.1",
    "mercadopago": "^1.5.13",
    "method-override": "^3.0.0",
    "morgan": "^1.10.0",
    "nodemailer": "^6.7.5",
    "swagger-jsdoc": "^6.2.1",
    "swagger-ui-express": "^4.4.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.23.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.26.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-06-21T13:59:22.920Z] Building nodejs source
[debug] [2022-06-21T13:59:22.920Z] Analyzing nodejs backend spec
[debug] [2022-06-21T13:59:22.920Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: exited"}}
[debug] [2022-06-21T13:59:22.920Z] [worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-api-ae486fea-bb90-4d5e-b628-c2918b2a9c70]: FINISHED"}}
[debug] [2022-06-21T13:59:22.920Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-06-21T13:59:23.083Z] Serving at port 9005

[debug] [2022-06-21T13:59:23.794Z] Got response from /__/functions.yaml {"endpoints":{"setCustomerClaim":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/shoppit-app-stg"},"retry":false},"labels":{},"entryPoint":"setCustomerClaim"},"api":{"platform":"gcfv1","httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-06-21T13:59:23.799Z] shutdown requested via /__/quitquitquit

